<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product List</title>

  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
</head>
<body class="bg-gray-100">

  <!-- Include Sidebar -->
  {% include 'admin_sidebar.html' %}

  <!-- Main Content -->
  <div class="ml-64 p-6">
    <div class="bg-white rounded shadow-sm mb-8">
      <div class="p-6 border-b border-gray-100">
        <div class="flex justify-between items-center">
          <h1 class="text-lg font-bold text-gray-800">Product Management</h1>
          <a href="{% url 'add_product' %}" class="inline-flex items-center bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition duration-200 shadow">
            <i class="ri-add-line mr-2"></i> Add Product
          </a>
        </div>
      </div>

      <!-- Messages -->
      {% if messages %}
      <div class="flex flex-col items-center px-4 py-4 space-y-3">
        {% for message in messages %}
        <div class="flex items-center {% if message.tags == 'success' %}bg-green-100 border border-green-400 text-green-800{% elif message.tags == 'error' %}bg-red-100 border border-red-400 text-red-800{% elif message.tags == 'info' %}bg-blue-100 border border-blue-400 text-blue-800{% else %}bg-gray-100 border border-gray-400 text-gray-800{% endif %} text-sm font-semibold px-6 py-3 rounded-md shadow-md w-full max-w-md" role="alert">
          <i class="ri-information-line mr-2"></i>
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Table -->
      <div class="p-6 overflow-x-auto">
        <table class="w-full text-sm text-left text-gray-700">
          <thead class="text-xs text-gray-500 uppercase bg-gray-50">
            <tr>
              <th class="px-6 py-3">ID</th>
              <th class="px-6 py-3">Name</th>
              <th class="px-6 py-3">Category</th>
              <th class="px-6 py-3">Price</th>
              <th class="px-6 py-3">Stock</th>
              <th class="px-6 py-3 text-right">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for product in products %}
            <tr class="bg-white border-b hover:bg-gray-50">
              <td class="px-6 py-4 font-medium text-gray-800">{{ product.product_id }}</td>
              <td class="px-6 py-4">{{ product.name }}</td>
              <td class="px-6 py-4">{{ product.category }}</td>
              <td class="px-6 py-4 font-medium text-gray-900">â‚¹{{ product.price }}</td>
              <td class="px-6 py-4">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                  {% if product.stock_availability > 10 %}bg-green-100 text-green-800
                  {% elif product.stock_availability > 0 %}bg-yellow-100 text-yellow-800
                  {% else %}bg-red-100 text-red-800{% endif %}">
                  {{ product.stock_availability }}
                </span>
              </td>
              <td class="px-6 py-4 text-right space-x-2">
                <a href="{% url 'view_product' product.id %}" title="View" class="text-blue-600 hover:text-blue-800">
                  <i class="ri-eye-line"></i>
                </a>
                <a href="{% url 'edit_product' product.id %}" title="Edit" class="text-yellow-600 hover:text-yellow-800">
                  <i class="ri-edit-line"></i>
                </a>
                <a href="{% url 'delete_product' product.id %}" title="Delete" class="text-red-600 hover:text-red-800" onclick="return confirm('Are you sure you want to delete this product?')">
                  <i class="ri-delete-bin-line"></i>
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                <div class="flex flex-col items-center justify-center">
                  <i class="ri-inbox-line text-4xl text-gray-300 mb-2"></i>
                  <p class="text-lg">No products found</p>
                  <p class="text-sm mt-1">Add your first product using the "Add Product" button</p>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

</body>
</html>
